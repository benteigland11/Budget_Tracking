<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Budget App{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            padding-top: 1.5rem; 
            padding-bottom: 1.5rem; 
            background-color: #f8f9fa; 
        }
        .container-xl { 
            max-width: 1400px; 
        }
        .card { 
            border-radius: 0.75rem; 
            box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075); 
            margin-bottom: 1.5rem; 
        }
        .card-header, .modal-header { 
            background-color: #007bff; 
            color: white; 
            border-bottom: none; 
        }
        .card-header {
            border-top-left-radius: 0.75rem; 
            border-top-right-radius: 0.75rem; 
            padding: 0.75rem 1.25rem; 
        }
        .modal-header .btn-close { 
            filter: invert(1) grayscale(100%) brightness(200%); 
        }
        .card-header h2, .card-header h5, .modal-title { 
            margin-bottom: 0; 
            font-size: 1.25rem; 
        }
        .flashes { list-style-type: none; padding-left: 0; margin-bottom: 1rem; }
        .flashes li { padding: 0.75rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: 0.5rem; }
        .flashes .success { color: #0f5132; background-color: #d1e7dd; border-color: #badbcc;}
        .flashes .error { color: #842029; background-color: #f8d7da; border-color: #f5c2c7;}
        .flashes .info { color: #055160; background-color: #cff4fc; border-color: #b6effb;}
        .form-control, .form-select, .btn { 
            border-radius: 0.375rem; 
        }
         .sticky-thead th { 
            position: sticky; 
            top: 0; 
            z-index: 10; 
            background-color: #f0f3f5; 
        }
    </style>
    {% block head_styles %}{% endblock %} {# For page-specific styles #}
</head>
<body>
    <div class="container-xl">
        <header class="text-center mb-4">
            <h1 class="display-5 fw-bold">{% block page_title %}Budget Dashboard & Analytics{% endblock %}</h1>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                {% for category_flash, message_flash in messages %}
                    <li class="{{category_flash}}">{{message_flash}}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %} {# Main content of the page will go here #}

        <footer class="text-center mt-5 mb-3 text-muted">
            <small>Advanced Budget App &copy; {{ current_year }}</small>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    {% block scripts %}{% endblock %} {# For page-specific JavaScript #}
</body>
</html>
